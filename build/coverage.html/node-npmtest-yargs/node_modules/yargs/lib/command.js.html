<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-yargs/node_modules/yargs/lib/command.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-yargs">npmtest-yargs (v0.0.2)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-yargs/node_modules/yargs/lib/command.js</span></h1>
    <h2>
        
        Statements: <span class="metric">20.41% <small>(40 / 196)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">2.83% <small>(3 / 106)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">16% <small>(4 / 25)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">22.47% <small>(40 / 178)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-yargs/node_modules/yargs/lib/</a> &#187; command.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336</td><td class="line-coverage"><span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">const path = require('path')
const inspect = require('util').inspect
const camelCase = require('camelcase')
&nbsp;
const DEFAULT_MARKER = '*'
&nbsp;
// handles parsing positional arguments,
// and populating argv with said positional
// arguments.
module.exports = function (yargs, usage, validation) {
  const self = {}
&nbsp;
  var handlers = {}
  var aliasMap = {}
  var defaultCommand
  self.addHandler = <span class="fstat-no" title="function not covered" >function (cmd, description, builder, handler) {</span>
<span class="cstat-no" title="statement not covered" >    var aliases = []</span>
<span class="cstat-no" title="statement not covered" >    if (Array.isArray(cmd)) {</span>
<span class="cstat-no" title="statement not covered" >      aliases = cmd.slice(1)</span>
<span class="cstat-no" title="statement not covered" >      cmd = cmd[0]</span>
    } else <span class="cstat-no" title="statement not covered" >if (typeof cmd === 'object') {</span>
<span class="cstat-no" title="statement not covered" >      var command = (Array.isArray(cmd.command) || typeof cmd.command === 'string') ? cmd.command : moduleName(cmd)</span>
<span class="cstat-no" title="statement not covered" >      if (cmd.aliases) <span class="cstat-no" title="statement not covered" >command = [].concat(command).concat(cmd.aliases)</span></span>
<span class="cstat-no" title="statement not covered" >      self.addHandler(command, extractDesc(cmd), cmd.builder, cmd.handler)</span>
<span class="cstat-no" title="statement not covered" >      return</span>
    }
&nbsp;
    // allow a module to be provided instead of separate builder and handler
<span class="cstat-no" title="statement not covered" >    if (typeof builder === 'object' &amp;&amp; builder.builder &amp;&amp; typeof builder.handler === 'function') {</span>
<span class="cstat-no" title="statement not covered" >      self.addHandler([cmd].concat(aliases), description, builder.builder, builder.handler)</span>
<span class="cstat-no" title="statement not covered" >      return</span>
    }
&nbsp;
    // parse positionals out of cmd string
<span class="cstat-no" title="statement not covered" >    var parsedCommand = self.parseCommand(cmd)</span>
&nbsp;
    // remove positional args from aliases only
<span class="cstat-no" title="statement not covered" >    aliases = aliases.map(<span class="fstat-no" title="function not covered" >function (alias) {</span></span>
<span class="cstat-no" title="statement not covered" >      return self.parseCommand(alias).cmd</span>
    })
&nbsp;
    // check for default and filter out '*''
<span class="cstat-no" title="statement not covered" >    var isDefault = false</span>
<span class="cstat-no" title="statement not covered" >    var parsedAliases = [parsedCommand.cmd].concat(aliases).filter(<span class="fstat-no" title="function not covered" >function (c) {</span></span>
<span class="cstat-no" title="statement not covered" >      if (c === DEFAULT_MARKER) {</span>
<span class="cstat-no" title="statement not covered" >        isDefault = true</span>
<span class="cstat-no" title="statement not covered" >        return false</span>
      }
<span class="cstat-no" title="statement not covered" >      return true</span>
    })
&nbsp;
    // short-circuit if default with no aliases
<span class="cstat-no" title="statement not covered" >    if (isDefault &amp;&amp; parsedAliases.length === 0) {</span>
<span class="cstat-no" title="statement not covered" >      defaultCommand = {</span>
        original: cmd.replace(DEFAULT_MARKER, '').trim(),
        handler: handler,
        builder: builder || {},
        demanded: parsedCommand.demanded,
        optional: parsedCommand.optional
      }
<span class="cstat-no" title="statement not covered" >      return</span>
    }
&nbsp;
    // shift cmd and aliases after filtering out '*'
<span class="cstat-no" title="statement not covered" >    if (isDefault) {</span>
<span class="cstat-no" title="statement not covered" >      parsedCommand.cmd = parsedAliases[0]</span>
<span class="cstat-no" title="statement not covered" >      aliases = parsedAliases.slice(1)</span>
<span class="cstat-no" title="statement not covered" >      cmd = cmd.replace(DEFAULT_MARKER, parsedCommand.cmd)</span>
    }
&nbsp;
    // populate aliasMap
<span class="cstat-no" title="statement not covered" >    aliases.forEach(<span class="fstat-no" title="function not covered" >function (alias) {</span></span>
<span class="cstat-no" title="statement not covered" >      aliasMap[alias] = parsedCommand.cmd</span>
    })
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (description !== false) {</span>
<span class="cstat-no" title="statement not covered" >      usage.command(cmd, description, isDefault, aliases)</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    handlers[parsedCommand.cmd] = {</span>
      original: cmd,
      handler: handler,
      builder: builder || {},
      demanded: parsedCommand.demanded,
      optional: parsedCommand.optional
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (isDefault) <span class="cstat-no" title="statement not covered" >defaultCommand = handlers[parsedCommand.cmd]</span></span>
  }
&nbsp;
  self.addDirectory = <span class="fstat-no" title="function not covered" >function (dir, context, req, callerFile, opts) {</span>
<span class="cstat-no" title="statement not covered" >    opts = opts || {}</span>
    // disable recursion to support nested directories of subcommands
<span class="cstat-no" title="statement not covered" >    if (typeof opts.recurse !== 'boolean') <span class="cstat-no" title="statement not covered" >opts.recurse = false</span></span>
    // exclude 'json', 'coffee' from require-directory defaults
<span class="cstat-no" title="statement not covered" >    if (!Array.isArray(opts.extensions)) <span class="cstat-no" title="statement not covered" >opts.extensions = ['js']</span></span>
    // allow consumer to define their own visitor function
<span class="cstat-no" title="statement not covered" >    const parentVisit = typeof opts.visit === 'function' ? opts.visit : <span class="fstat-no" title="function not covered" >function (o) {</span> <span class="cstat-no" title="statement not covered" >return o }</span></span>
    // call addHandler via visitor function
<span class="cstat-no" title="statement not covered" >    opts.visit = <span class="fstat-no" title="function not covered" >function (obj, joined, filename) {</span></span>
<span class="cstat-no" title="statement not covered" >      const visited = parentVisit(obj, joined, filename)</span>
      // allow consumer to skip modules with their own visitor
<span class="cstat-no" title="statement not covered" >      if (visited) {</span>
        // check for cyclic reference
        // each command file path should only be seen once per execution
<span class="cstat-no" title="statement not covered" >        if (~context.files.indexOf(joined)) <span class="cstat-no" title="statement not covered" >return visited</span></span>
        // keep track of visited files in context.files
<span class="cstat-no" title="statement not covered" >        context.files.push(joined)</span>
<span class="cstat-no" title="statement not covered" >        self.addHandler(visited)</span>
      }
<span class="cstat-no" title="statement not covered" >      return visited</span>
    }
<span class="cstat-no" title="statement not covered" >    require('require-directory')({ require: req, filename: callerFile }, dir, opts)</span>
  }
&nbsp;
  // lookup module object from require()d command and derive name
  // if module was not require()d and no name given, throw error
<span class="fstat-no" title="function not covered" >  function moduleName (obj) {</span>
<span class="cstat-no" title="statement not covered" >    const mod = require('which-module')(obj)</span>
<span class="cstat-no" title="statement not covered" >    if (!mod) <span class="cstat-no" title="statement not covered" >throw new Error('No command name given for module: ' + inspect(obj))</span></span>
<span class="cstat-no" title="statement not covered" >    return commandFromFilename(mod.filename)</span>
  }
&nbsp;
  // derive command name from filename
<span class="fstat-no" title="function not covered" >  function commandFromFilename (filename) {</span>
<span class="cstat-no" title="statement not covered" >    return path.basename(filename, path.extname(filename))</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function extractDesc (obj) {</span>
<span class="cstat-no" title="statement not covered" >    for (var keys = ['describe', 'description', 'desc'], i = 0, l = keys.length, test; i &lt; l; i++) {</span>
<span class="cstat-no" title="statement not covered" >      test = obj[keys[i]]</span>
<span class="cstat-no" title="statement not covered" >      if (typeof test === 'string' || typeof test === 'boolean') <span class="cstat-no" title="statement not covered" >return test</span></span>
    }
<span class="cstat-no" title="statement not covered" >    return false</span>
  }
&nbsp;
  self.parseCommand = function (cmd) {
    var extraSpacesStrippedCommand = cmd.replace(/\s{2,}/g, ' ')
    var splitCommand = extraSpacesStrippedCommand.split(/\s+(?![^[]*]|[^&lt;]*&gt;)/)
    var bregex = /\.*[\][&lt;&gt;]/g
    var parsedCommand = {
      cmd: (splitCommand.shift()).replace(bregex, ''),
      demanded: [],
      optional: []
    }
    splitCommand.forEach(function (cmd, i) {
      var variadic = false
      cmd = cmd.replace(/\s/g, '')
      <span class="missing-if-branch" title="if path not taken" >I</span>if (/\.+[\]&gt;]/.test(cmd) &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >i === splitCommand.length - 1)</span> <span class="cstat-no" title="statement not covered" >variadic = true</span>
      <span class="missing-if-branch" title="else path not taken" >E</span>if (/^\[/.test(cmd)) {
        parsedCommand.optional.push({
          cmd: cmd.replace(bregex, '').split('|'),
          variadic: variadic
        })
      } else {
<span class="cstat-no" title="statement not covered" >        parsedCommand.demanded.push({</span>
          cmd: cmd.replace(bregex, '').split('|'),
          variadic: variadic
        })
      }
    })
    return parsedCommand
  }
&nbsp;
  self.getCommands = <span class="fstat-no" title="function not covered" >function () {</span>
<span class="cstat-no" title="statement not covered" >    return Object.keys(handlers).concat(Object.keys(aliasMap))</span>
  }
&nbsp;
  self.getCommandHandlers = <span class="fstat-no" title="function not covered" >function () {</span>
<span class="cstat-no" title="statement not covered" >    return handlers</span>
  }
&nbsp;
  self.hasDefaultCommand = function () {
    return !!defaultCommand
  }
&nbsp;
  self.runCommand = <span class="fstat-no" title="function not covered" >function (command, yargs, parsed) {</span>
<span class="cstat-no" title="statement not covered" >    var aliases = parsed.aliases</span>
<span class="cstat-no" title="statement not covered" >    var commandHandler = handlers[command] || handlers[aliasMap[command]] || defaultCommand</span>
<span class="cstat-no" title="statement not covered" >    var currentContext = yargs.getContext()</span>
<span class="cstat-no" title="statement not covered" >    var numFiles = currentContext.files.length</span>
<span class="cstat-no" title="statement not covered" >    var parentCommands = currentContext.commands.slice()</span>
&nbsp;
    // what does yargs look like after the buidler is run?
<span class="cstat-no" title="statement not covered" >    var innerArgv = parsed.argv</span>
<span class="cstat-no" title="statement not covered" >    var innerYargs = null</span>
<span class="cstat-no" title="statement not covered" >    var positionalMap = {}</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (command) <span class="cstat-no" title="statement not covered" >currentContext.commands.push(command)</span></span>
<span class="cstat-no" title="statement not covered" >    if (typeof commandHandler.builder === 'function') {</span>
      // a function can be provided, which builds
      // up a yargs chain and possibly returns it.
<span class="cstat-no" title="statement not covered" >      innerYargs = commandHandler.builder(yargs.reset(parsed.aliases))</span>
      // if the builder function did not yet parse argv with reset yargs
      // and did not explicitly set a usage() string, then apply the
      // original command string as usage() for consistent behavior with
      // options object below.
<span class="cstat-no" title="statement not covered" >      if (yargs.parsed === false) {</span>
<span class="cstat-no" title="statement not covered" >        if (typeof yargs.getUsageInstance().getUsage() === 'undefined') {</span>
<span class="cstat-no" title="statement not covered" >          yargs.usage('$0 ' + (parentCommands.length ? parentCommands.join(' ') + ' ' : '') + commandHandler.original)</span>
        }
<span class="cstat-no" title="statement not covered" >        innerArgv = innerYargs ? innerYargs._parseArgs(null, null, true) : yargs._parseArgs(null, null, true)</span>
      } else {
<span class="cstat-no" title="statement not covered" >        innerArgv = yargs.parsed.argv</span>
      }
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (innerYargs &amp;&amp; yargs.parsed === false) <span class="cstat-no" title="statement not covered" >aliases = innerYargs.parsed.aliases</span></span>
      else <span class="cstat-no" title="statement not covered" >aliases = yargs.parsed.aliases</span>
    } else <span class="cstat-no" title="statement not covered" >if (typeof commandHandler.builder === 'object') {</span>
      // as a short hand, an object can instead be provided, specifying
      // the options that a command takes.
<span class="cstat-no" title="statement not covered" >      innerYargs = yargs.reset(parsed.aliases)</span>
<span class="cstat-no" title="statement not covered" >      innerYargs.usage('$0 ' + (parentCommands.length ? parentCommands.join(' ') + ' ' : '') + commandHandler.original)</span>
<span class="cstat-no" title="statement not covered" >      Object.keys(commandHandler.builder).forEach(<span class="fstat-no" title="function not covered" >function (key) {</span></span>
<span class="cstat-no" title="statement not covered" >        innerYargs.option(key, commandHandler.builder[key])</span>
      })
<span class="cstat-no" title="statement not covered" >      innerArgv = innerYargs._parseArgs(null, null, true)</span>
<span class="cstat-no" title="statement not covered" >      aliases = innerYargs.parsed.aliases</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!yargs._hasOutput()) {</span>
<span class="cstat-no" title="statement not covered" >      positionalMap = populatePositionals(commandHandler, innerArgv, currentContext, yargs)</span>
    }
&nbsp;
    // we apply validation post-hoc, so that custom
    // checks get passed populated positional arguments.
<span class="cstat-no" title="statement not covered" >    if (!yargs._hasOutput()) <span class="cstat-no" title="statement not covered" >yargs._runValidation(innerArgv, aliases, positionalMap, yargs.parsed.error)</span></span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (commandHandler.handler &amp;&amp; !yargs._hasOutput()) {</span>
<span class="cstat-no" title="statement not covered" >      yargs._setHasOutput()</span>
<span class="cstat-no" title="statement not covered" >      commandHandler.handler(innerArgv)</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (command) <span class="cstat-no" title="statement not covered" >currentContext.commands.pop()</span></span>
<span class="cstat-no" title="statement not covered" >    numFiles = currentContext.files.length - numFiles</span>
<span class="cstat-no" title="statement not covered" >    if (numFiles &gt; 0) <span class="cstat-no" title="statement not covered" >currentContext.files.splice(numFiles * -1, numFiles)</span></span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return innerArgv</span>
  }
&nbsp;
  // transcribe all positional arguments "command &lt;foo&gt; &lt;bar&gt; [apple]"
  // onto argv.
<span class="fstat-no" title="function not covered" >  function populatePositionals (commandHandler, argv, context, yargs) {</span>
<span class="cstat-no" title="statement not covered" >    argv._ = argv._.slice(context.commands.length) </span>// nuke the current commands
<span class="cstat-no" title="statement not covered" >    var demanded = commandHandler.demanded.slice(0)</span>
<span class="cstat-no" title="statement not covered" >    var optional = commandHandler.optional.slice(0)</span>
<span class="cstat-no" title="statement not covered" >    var positionalMap = {}</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    validation.positionalCount(demanded.length, argv._.length)</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    while (demanded.length) {</span>
<span class="cstat-no" title="statement not covered" >      var demand = demanded.shift()</span>
<span class="cstat-no" title="statement not covered" >      populatePositional(demand, argv, yargs, positionalMap)</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    while (optional.length) {</span>
<span class="cstat-no" title="statement not covered" >      var maybe = optional.shift()</span>
<span class="cstat-no" title="statement not covered" >      populatePositional(maybe, argv, yargs, positionalMap)</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    argv._ = context.commands.concat(argv._)</span>
<span class="cstat-no" title="statement not covered" >    return positionalMap</span>
  }
&nbsp;
  // populate a single positional argument and its
  // aliases onto argv.
<span class="fstat-no" title="function not covered" >  function populatePositional (positional, argv, yargs, positionalMap) {</span>
    // "positional" consists of the positional.cmd, an array representing
    // the positional's name and aliases, and positional.variadic
    // indicating whether or not it is a variadic array.
<span class="cstat-no" title="statement not covered" >    var variadics = null</span>
<span class="cstat-no" title="statement not covered" >    var value = null</span>
<span class="cstat-no" title="statement not covered" >    for (var i = 0, cmd; (cmd = positional.cmd[i]) !== undefined; i++) {</span>
<span class="cstat-no" title="statement not covered" >      if (positional.variadic) {</span>
<span class="cstat-no" title="statement not covered" >        if (variadics) <span class="cstat-no" title="statement not covered" >argv[cmd] = variadics.slice(0)</span></span>
        else <span class="cstat-no" title="statement not covered" >argv[cmd] = variadics = argv._.splice(0)</span>
      } else {
<span class="cstat-no" title="statement not covered" >        if (!value &amp;&amp; !argv._.length) <span class="cstat-no" title="statement not covered" >continue</span></span>
<span class="cstat-no" title="statement not covered" >        if (value) <span class="cstat-no" title="statement not covered" >argv[cmd] = value</span></span>
        else <span class="cstat-no" title="statement not covered" >argv[cmd] = value = argv._.shift()</span>
      }
<span class="cstat-no" title="statement not covered" >      positionalMap[cmd] = true</span>
<span class="cstat-no" title="statement not covered" >      postProcessPositional(yargs, argv, cmd)</span>
<span class="cstat-no" title="statement not covered" >      addCamelCaseExpansions(argv, cmd)</span>
    }
  }
&nbsp;
  // TODO move positional arg logic to yargs-parser and remove this duplication
<span class="fstat-no" title="function not covered" >  function postProcessPositional (yargs, argv, key) {</span>
<span class="cstat-no" title="statement not covered" >    var coerce = yargs.getOptions().coerce[key]</span>
<span class="cstat-no" title="statement not covered" >    if (typeof coerce === 'function') {</span>
<span class="cstat-no" title="statement not covered" >      try {</span>
<span class="cstat-no" title="statement not covered" >        argv[key] = coerce(argv[key])</span>
      } catch (err) {
<span class="cstat-no" title="statement not covered" >        yargs.getUsageInstance().fail(err.message, err)</span>
      }
    }
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function addCamelCaseExpansions (argv, option) {</span>
<span class="cstat-no" title="statement not covered" >    if (/-/.test(option)) {</span>
<span class="cstat-no" title="statement not covered" >      const cc = camelCase(option)</span>
<span class="cstat-no" title="statement not covered" >      if (typeof argv[option] === 'object') <span class="cstat-no" title="statement not covered" >argv[cc] = argv[option].slice(0)</span></span>
      else <span class="cstat-no" title="statement not covered" >argv[cc] = argv[option]</span>
    }
  }
&nbsp;
  self.reset = <span class="fstat-no" title="function not covered" >function () {</span>
<span class="cstat-no" title="statement not covered" >    handlers = {}</span>
<span class="cstat-no" title="statement not covered" >    aliasMap = {}</span>
<span class="cstat-no" title="statement not covered" >    defaultCommand = undefined</span>
<span class="cstat-no" title="statement not covered" >    return self</span>
  }
&nbsp;
  // used by yargs.parse() to freeze
  // the state of commands such that
  // we can apply .parse() multiple times
  // with the same yargs instance.
  var frozen
  self.freeze = <span class="fstat-no" title="function not covered" >function () {</span>
<span class="cstat-no" title="statement not covered" >    frozen = {}</span>
<span class="cstat-no" title="statement not covered" >    frozen.handlers = handlers</span>
<span class="cstat-no" title="statement not covered" >    frozen.aliasMap = aliasMap</span>
<span class="cstat-no" title="statement not covered" >    frozen.defaultCommand = defaultCommand</span>
  }
  self.unfreeze = <span class="fstat-no" title="function not covered" >function () {</span>
<span class="cstat-no" title="statement not covered" >    handlers = frozen.handlers</span>
<span class="cstat-no" title="statement not covered" >    aliasMap = frozen.aliasMap</span>
<span class="cstat-no" title="statement not covered" >    defaultCommand = frozen.defaultCommand</span>
<span class="cstat-no" title="statement not covered" >    frozen = undefined</span>
  }
&nbsp;
  return self
}
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Sun Apr 16 2017 08:47:56 GMT+0000 (UTC)</div>
</div>
</body>
</html>
